const loc=document.getElementById("location"),state=document.getElementById("state"),button=document.getElementById("button"),card=document.getElementById("card"),cardImg=document.querySelector(".card-img-top");let url,data,temp,sunset,tempFahrenheit,lat,long,img=document.querySelector("img");const convertToFahrenheit=()=>{tempFahrenheit=(1.8*temp+32).toString().slice(0,4)},nightUi=()=>{img.src="http://svgshare.com/i/4FW.svg",card.style.backgroundColor="#02475e",cardImg.style.backgroundColor="#02475e"},dayUi=()=>{switch(data.weather[0].description){case"broken clouds":case"scattered clouds":img.src="http://svgshare.com/i/4E6.svg";break;case"clouds":img.src="http://svgshare.com/i/4GW.svg";break;case"few clouds":img.src="http://svgshare.com/i/4L1.svg";break;case"shower rain":img.src="http://svgshare.com/i/4G0.svg";break;case"thunderstorm with rain":img.src="https://svgshare.com/i/5oa.svg";break;case"mist":img.src="http://svgshare.com/i/4GW.svg";break;case"clear sky":default:img.src="https://svgshare.com/i/5ob.svg"}},compareSunsetTime=()=>{let t=(new Date).getTime().toString().slice(0,10);t=parseInt(t),sunset<=t?(img.src="http://svgshare.com/i/4FW.svg",card.style.backgroundColor="#02475e",cardImg.style.backgroundColor="#02475e"):dayUi()},request=()=>{let t=new XMLHttpRequest;t.onreadystatechange=(()=>{4===t.readyState&&(data=JSON.parse(t.responseText),temp=data.main.temp.toString().slice(0,4),loc.innerText=`${data.name}, ${data.sys.country}`,state.innerText=`${temp}°C`,sunset=data.sys.sunset)}),t.open("GET",url,!1),t.send()},getLocation=()=>{navigator.geolocation.getCurrentPosition(t=>{navigator.geolocation?(lat=t.coords.latitude.toFixed(2),long=t.coords.longitude.toFixed(2),url=`https://fcc-weather-api.glitch.me/api/current?lat=${lat}&lon=${long}`,request(),tempFahrenheit=(1.8*temp+32).toString().slice(0,4),compareSunsetTime()):alert("error")})};button.addEventListener("click",()=>{"FAHRENHEIT"===button.innerText?(state.innerText=`${tempFahrenheit}°F`,button.innerText="CELSIUS"):"CELSIUS"===button.innerText&&(button.innerText="FAHRENHEIT",state.innerText=`${temp}°C`)}),navigator.geolocation.getCurrentPosition(t=>{navigator.geolocation?(lat=t.coords.latitude.toFixed(2),long=t.coords.longitude.toFixed(2),url=`https://fcc-weather-api.glitch.me/api/current?lat=${lat}&lon=${long}`,request(),tempFahrenheit=(1.8*temp+32).toString().slice(0,4),compareSunsetTime()):alert("error")});